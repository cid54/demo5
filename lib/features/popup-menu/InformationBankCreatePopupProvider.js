import { assign } from "min-dash";

const INFORMATION_BANK_ASSIGNMENTS = [
  {
    label: "Default",
    assignment: "Default",
  },
  {
    label: "Missing",
    assignment: "Missing",
  },
];

export default function InformationBankPopupProvider(
  config,
  popupMenu,
  modeling,
  translate,
  create,
  demoFactory,
  elementFactory
) {
  this._popupMenu = popupMenu;
  this._modeling = modeling;
  this._translate = translate;
  this._create = create;
  this._demoFactory = demoFactory;
  this._elementFactory = elementFactory;

  this._informationBankAssignments =
    (config && config.informationBankAssignments) ||
    INFORMATION_BANK_ASSIGNMENTS;

  this._popupMenu.registerProvider("informationBank-assignment-picker", this);
}

InformationBankPopupProvider.$inject = [
  "config.informationBankPicker",
  "popupMenu",
  "modeling",
  "translate",
  "create",
  "demoFactory",
  "elementFactory",
];

InformationBankPopupProvider.prototype.getEntries = function (elements) {
  var self = this,
    elementFactory = this._elementFactory,
    demoFactory = this._demoFactory,
    popupMenu = this._popupMenu,
    create = this._create;

  let informationBankIconHtml = `<svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_44_98)">
<mask id="path-1-inside-1_44_98" fill="white">
<path fill-rule="evenodd" clip-rule="evenodd" d="M59.4351 27.1596L32.2176 -0.0578709L5.00006 27.1596L9.81148 31.9711L5.00006 36.7825L32.2176 64L59.4351 36.7825L54.6237 31.9711L59.4351 27.1596Z"/>
</mask>
<path d="M32.2176 -0.0578709L34.3389 -2.17919L32.2176 -4.30051L30.0963 -2.17919L32.2176 -0.0578709ZM59.4351 27.1596L61.5564 29.281L63.6777 27.1596L61.5564 25.0383L59.4351 27.1596ZM5.00006 27.1596L2.87874 25.0383L0.757418 27.1596L2.87874 29.281L5.00006 27.1596ZM9.81148 31.9711L11.9328 34.0924L14.0541 31.9711L11.9328 29.8497L9.81148 31.9711ZM5.00006 36.7825L2.87874 34.6612L0.757418 36.7825L2.87874 38.9038L5.00006 36.7825ZM32.2176 64L30.0963 66.1213L32.2176 68.2426L34.3389 66.1213L32.2176 64ZM59.4351 36.7825L61.5564 38.9038L63.6777 36.7825L61.5564 34.6612L59.4351 36.7825ZM54.6237 31.9711L52.5023 29.8497L50.381 31.9711L52.5023 34.0924L54.6237 31.9711ZM30.0963 2.06345L57.3138 29.281L61.5564 25.0383L34.3389 -2.17919L30.0963 2.06345ZM7.12138 29.281L34.3389 2.06345L30.0963 -2.17919L2.87874 25.0383L7.12138 29.281ZM11.9328 29.8497L7.12138 25.0383L2.87874 29.281L7.69016 34.0924L11.9328 29.8497ZM7.12138 38.9038L11.9328 34.0924L7.69016 29.8497L2.87874 34.6612L7.12138 38.9038ZM34.3389 61.8787L7.12138 34.6612L2.87874 38.9038L30.0963 66.1213L34.3389 61.8787ZM57.3138 34.6612L30.0963 61.8787L34.3389 66.1213L61.5564 38.9038L57.3138 34.6612ZM52.5023 34.0924L57.3138 38.9038L61.5564 34.6612L56.745 29.8497L52.5023 34.0924ZM57.3138 25.0383L52.5023 29.8497L56.745 34.0924L61.5564 29.281L57.3138 25.0383Z" fill="black" mask="url(#path-1-inside-1_44_98)"/>
<rect x="32.2175" y="11.6863" width="35.4914" height="35.4914" transform="rotate(45 32.2175 11.6863)" stroke="black" stroke-width="3"/>
</g>
<defs>
<clipPath id="clip0_44_98">
<rect width="64" height="64" fill="white"/>
</clipPath>
</defs>
</svg>`;

  var entries = this._informationBankAssignments.map(
    function (informationBank) {
      switch (informationBank.assignment) {
        case "Missing":
          informationBankIconHtml = `<svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_44_104)">
<mask id="path-1-inside-1_44_104" fill="white">
<path fill-rule="evenodd" clip-rule="evenodd" d="M59.4351 27.1596L32.2176 -0.0578709L5.00006 27.1596L9.81148 31.9711L5.00006 36.7825L32.2176 64L59.4351 36.7825L54.6237 31.9711L59.4351 27.1596Z"/>
</mask>
<path d="M32.2176 -0.0578709L33.2782 -1.11853L32.2176 -2.17919L31.1569 -1.11853L32.2176 -0.0578709ZM59.4351 27.1596L60.4957 28.2203L61.5564 27.1596L60.4957 26.099L59.4351 27.1596ZM5.00006 27.1596L3.9394 26.099L2.87874 27.1596L3.9394 28.2203L5.00006 27.1596ZM9.81148 31.9711L10.8721 33.0317L11.9328 31.9711L10.8721 30.9104L9.81148 31.9711ZM5.00006 36.7825L3.9394 35.7218L2.87874 36.7825L3.9394 37.8432L5.00006 36.7825ZM32.2176 64L31.1569 65.0607L32.2176 66.1213L33.2782 65.0607L32.2176 64ZM59.4351 36.7825L60.4957 37.8432L61.5564 36.7825L60.4957 35.7218L59.4351 36.7825ZM54.6237 31.9711L53.563 30.9104L52.5023 31.9711L53.563 33.0317L54.6237 31.9711ZM31.1569 -1.11853L28.8888 1.1496L31.0101 3.27092L33.2782 1.00279L31.1569 -1.11853ZM24.3525 5.68585L19.8163 10.2221L21.9376 12.3434L26.4739 7.80717L24.3525 5.68585ZM15.28 14.7584L10.7438 19.2946L12.8651 21.4159L17.4014 16.8797L15.28 14.7584ZM6.20752 23.8309L3.9394 26.099L6.06072 28.2203L8.32884 25.9522L6.20752 23.8309ZM3.9394 28.2203L5.14225 29.4232L7.26358 27.3018L6.06072 26.099L3.9394 28.2203ZM7.54797 31.8289L8.75082 33.0317L10.8721 30.9104L9.66929 29.7076L7.54797 31.8289ZM8.75082 30.9104L7.54797 32.1133L9.66929 34.2346L10.8721 33.0317L8.75082 30.9104ZM5.14225 34.519L3.9394 35.7218L6.06072 37.8432L7.26358 36.6403L5.14225 34.519ZM3.9394 37.8432L6.20752 40.1113L8.32885 37.99L6.06072 35.7218L3.9394 37.8432ZM10.7438 44.6475L15.28 49.1838L17.4013 47.0625L12.8651 42.5262L10.7438 44.6475ZM19.8163 53.72L24.3525 58.2563L26.4739 56.135L21.9376 51.5987L19.8163 53.72ZM28.8888 62.7925L31.1569 65.0607L33.2782 62.9393L31.0101 60.6712L28.8888 62.7925ZM33.2782 65.0607L35.5464 62.7925L33.425 60.6712L31.1569 62.9393L33.2782 65.0607ZM40.0826 58.2563L44.6189 53.72L42.4975 51.5987L37.9613 56.135L40.0826 58.2563ZM49.1551 49.1838L53.6914 44.6475L51.57 42.5262L47.0338 47.0625L49.1551 49.1838ZM58.2276 40.1113L60.4957 37.8432L58.3744 35.7218L56.1063 37.99L58.2276 40.1113ZM60.4957 35.7218L59.2929 34.519L57.1716 36.6403L58.3744 37.8432L60.4957 35.7218ZM56.8872 32.1133L55.6843 30.9104L53.563 33.0317L54.7659 34.2346L56.8872 32.1133ZM55.6843 33.0317L56.8872 31.8289L54.7659 29.7076L53.563 30.9104L55.6843 33.0317ZM59.2929 29.4232L60.4957 28.2203L58.3744 26.099L57.1716 27.3018L59.2929 29.4232ZM60.4957 26.099L58.2276 23.8309L56.1063 25.9522L58.3744 28.2203L60.4957 26.099ZM53.6914 19.2946L49.1551 14.7584L47.0338 16.8797L51.57 21.4159L53.6914 19.2946ZM44.6189 10.2221L40.0826 5.68585L37.9613 7.80717L42.4975 12.3434L44.6189 10.2221ZM35.5464 1.14959L33.2782 -1.11853L31.1569 1.00279L33.425 3.27091L35.5464 1.14959ZM32.2176 -0.0578709L34.3389 -2.17919L32.2176 -4.30051L30.0963 -2.17919L32.2176 -0.0578709ZM59.4351 27.1596L61.5564 29.281L63.6777 27.1596L61.5564 25.0383L59.4351 27.1596ZM5.00006 27.1596L2.87874 25.0383L0.757418 27.1596L2.87874 29.281L5.00006 27.1596ZM9.81148 31.9711L11.9328 34.0924L14.0541 31.9711L11.9328 29.8497L9.81148 31.9711ZM5.00006 36.7825L2.87874 34.6612L0.757418 36.7825L2.87874 38.9038L5.00006 36.7825ZM32.2176 64L30.0963 66.1213L32.2176 68.2426L34.3389 66.1213L32.2176 64ZM59.4351 36.7825L61.5564 38.9038L63.6777 36.7825L61.5564 34.6612L59.4351 36.7825ZM54.6237 31.9711L52.5023 29.8497L50.381 31.9711L52.5023 34.0924L54.6237 31.9711ZM30.0963 -2.17919L27.8281 0.088935L32.0708 4.33158L34.3389 2.06345L30.0963 -2.17919ZM23.2919 4.62519L18.7556 9.16144L22.9983 13.4041L27.5345 8.86783L23.2919 4.62519ZM14.2194 13.6977L9.68312 18.2339L13.9258 22.4766L18.462 17.9403L14.2194 13.6977ZM5.14686 22.7702L2.87874 25.0383L7.12138 29.281L9.3895 27.0128L5.14686 22.7702ZM2.87874 29.281L4.08159 30.4838L8.32424 26.2412L7.12138 25.0383L2.87874 29.281ZM6.48731 32.8895L7.69016 34.0924L11.9328 29.8497L10.7299 28.6469L6.48731 32.8895ZM7.69016 29.8497L6.48731 31.0526L10.7299 35.2952L11.9328 34.0924L7.69016 29.8497ZM4.08159 33.4583L2.87874 34.6612L7.12138 38.9038L8.32424 37.701L4.08159 33.4583ZM2.87874 38.9038L5.14686 41.1719L9.38951 36.9293L7.12138 34.6612L2.87874 38.9038ZM9.68312 45.7082L14.2194 50.2444L18.462 46.0018L13.9258 41.4656L9.68312 45.7082ZM18.7556 54.7807L23.2919 59.3169L27.5345 55.0743L22.9983 50.5381L18.7556 54.7807ZM27.8281 63.8532L30.0963 66.1213L34.3389 61.8787L32.0708 59.6106L27.8281 63.8532ZM34.3389 66.1213L36.607 63.8532L32.3644 59.6106L30.0963 61.8787L34.3389 66.1213ZM41.1433 59.3169L45.6795 54.7807L41.4369 50.5381L36.9006 55.0743L41.1433 59.3169ZM50.2158 50.2444L54.752 45.7082L50.5094 41.4656L45.9731 46.0018L50.2158 50.2444ZM59.2883 41.1719L61.5564 38.9038L57.3138 34.6612L55.0456 36.9293L59.2883 41.1719ZM61.5564 34.6612L60.3536 33.4583L56.1109 37.701L57.3138 38.9038L61.5564 34.6612ZM57.9478 31.0526L56.745 29.8497L52.5023 34.0924L53.7052 35.2952L57.9478 31.0526ZM56.745 34.0924L57.9478 32.8895L53.7052 28.6469L52.5023 29.8497L56.745 34.0924ZM60.3536 30.4838L61.5564 29.281L57.3138 25.0383L56.1109 26.2412L60.3536 30.4838ZM61.5564 25.0383L59.2883 22.7702L55.0456 27.0128L57.3138 29.281L61.5564 25.0383ZM54.752 18.2339L50.2158 13.6977L45.9731 17.9403L50.5094 22.4766L54.752 18.2339ZM45.6795 9.16144L41.1433 4.62519L36.9006 8.86783L41.4369 13.4041L45.6795 9.16144ZM36.607 0.0889343L34.3389 -2.17919L30.0963 2.06345L32.3644 4.33158L36.607 0.0889343Z" fill="#FF6666" mask="url(#path-1-inside-1_44_104)"/>
<rect x="32.2175" y="11.6863" width="35.4914" height="35.4914" transform="rotate(45 32.2175 11.6863)" stroke="#FF6666" stroke-width="3" stroke-dasharray="6 6"/>
</g>
<defs>
<clipPath id="clip0_44_104">
<rect width="64" height="64" fill="white"/>
</clipPath>
</defs>
</svg>
`;
          break;
        default:
          break;
      }
      return {
        label: self._translate(informationBank.label),
        id: informationBank.label.toLowerCase() + "-informationBank-assignment",
        imageHtml: informationBankIconHtml,
        action: createAction(
          "demo:InformationBank",
          informationBank.assignment
        ),
      };
    }
  );

  return entries;

  function createAction(type, assignment) {
    function createListener(event) {
      const businessObject = demoFactory.create(type);
      businessObject.assignment = assignment;
      var shape = elementFactory.createShape(assign({ type, businessObject }));
      create.start(event, shape);
      popupMenu.close();
    }

    return {
      dragstart: createListener,
      click: createListener,
    };
  }
};
